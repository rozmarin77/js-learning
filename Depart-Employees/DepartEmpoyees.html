<!DOCTYPE html>
<html>
<head>
    <title>Company</title>
   <!-- <link rel="stylesheet" href="departmentStyle.css">-->

 </head>
 <body>
     <p><b>list of departments</b>
         <input type="button" id="showDepartment" value="Show departments">
         <input type="button" id="clearDepartment" value="Clear departments">
         <ol id="departments-list"></ol>
         <p>Enter department<br>
         <input type="text" id="departmentInput">
         <input type="button" id="addDepartment" value="Add department"><br></br>

         <p><b>list of employees</b>
         <input type="button" id="showEmployee" value="Show employees" onclick="refreshEmployees()">
         <input type="button" id="clearEmployee" value="Clear employees">

          
         
         <table id="employees-list" style="border-style: solid">
           <thead style="border-style: solid">
                <th>Id</th> 
                <th>Name</th>
                <th>Position</th>
            </thead>
            <tbody id="conteiner-employees">
                  <!--<tr id="tr"></tr>-->
            </tbody>


         <p>Enter employee<br>
         <input type="text" id="employeeInput">
         <select type="text" onchange="positionChanged(event)" id="position">
            <option value="worker">Worker</option>
            <option value="manager">Manager</option>                            
        </select>
         <input type="button" id="addEmployee" value="Add employee" onclick="addEmployeeClick()">
         <br></br>

    <script>

        window.onload = init;
        
        function Department(title){
            this.title = title;
        };

        let departments = [
            new Department('Marketing'),
            new Department('Technical'),
            new Department('Advertising')
        ]
        console.log(departments);
        
        function init(){
            let button = document.getElementById("showDepartment")
            button.onclick = showDepartmentClick;

            let buttonAdd = document.getElementById("addDepartment")
            buttonAdd.onclick = addDepartmentClick;

            let buttonClear = document.getElementById("clearDepartment")
            buttonClear.onclick = clearDepartmentClick;
        };

        let positions = {
            manager: 'manager',
            worker: 'worker'
        };

        function Employee(id, name, position) {
            this.id = id;
            this.name = name;
            this.position = position;

        }

        let lastEmployeeId = 2;

        let employees = [
            new Employee(1, 'Rone', positions.worker),
            new Employee(2, 'Vasya', positions.manager),
        ];
        console.log(employees)
        function positionChanged(e) {
            let select = e.target;
            console.log(select.value);
           // select.value = positions.value //посмотреть как работать будет
            //console.log(select.closest('tr').dataset.employeeId);
        }
        /*function fillListEmployees(){
           let table = document.createElement("table");
            table.setAttribute('border', '1');
            table.setAttribute('width','500');
            table.setAttribute('height', '150');

            let tbody = document.createElement('tbody');
            let tr = document.createElement('tr');//создаем tr-ку
                tr.innerHTML = '<td>Id</td><td>Name</td><td>Position</td>';
                tbody.appendChild(tr);

            let items = ['id','name','position'];
            for(let i = 0; i < employees.length; i++){
                let tr = document.createElement('tr');//создаем tr-ку
                     for (let j = 0; j < 3; j++) {//заполняем tr-ку td-шками 
                         let td = document.createElement('td');
                         let item = employees[i][items[j]];
                         td.innerHTML = item;// пишем в нее текст
                         tr.appendChild(td);// добавляем созданную td-шку в конец tr-ки 
                     }
                      tbody.appendChild(tr);// добавляем созданную tr-ку в конец таблицы 
            }
            
            table.appendChild(tbody);
            document.getElementById("conteiner-employees").appendChild(table);
            
        };*/
        function refreshEmployees(){
            fillListEmployees("conteiner-employees")
        }    
        function fillListEmployees(listId){
            let table = document.createElement("table");
            let tbody = document.createElement("tbody");
            let tr = document.createElement('tr');//создаем tr-ку
            //tbody.appendChild(tr);

                //tr.innerHTML = '<td>Id</td><td>Name</td><td>Position</td>';
                //tbody.appendChild(tr);

            //let items = ['id','name','position'];
            for (let i = 0; i < employees.length; i++) {
                let td = document.createElement('td');
                //let tr = document.createElement('tr');
                let employee = employees[i]
                td.innerHTML = employee;
                //let tr = '<tr>' + employee.title  + '</tr>'
                tr.appendChild(td);
               // tr.innerHTML += tr;
               
            }
            tbody.appendChild(tr);
          //  table.appendChild(tbody);
            document.getElementById("conteiner-employees").appendChild(tr);
        };
        /*function fillListEmployees(listId) {
            let listElement = document.getElementById(listId)
            listElement.innerHTML = " ";

            for (let i = 0; i < employees.length; i++) {
                let employee = employees[i]
                let tr = '<tr>' + employee.title  + '</tr>'
                listElement.innerHTML += tr;
            }
        };*/
        

        function addEmployeeClick(){
            let textTitle = document.getElementById("employeeInput")
            
            saveEmployees(textTitle.value)
            textTitle.value = " ";
            
            fillListEmployees("employees-list");
        };

        function saveEmployees(nameValue){
            let idEmp = ++lastEmployeeId ;
            let mySelectOption = getValue();
           
            let employee = {
                id: idEmp, 
                name: nameValue,
                position: mySelectOption
                }
                function getValue(){
                    let selectedValue = position.value;
                    return selectedValue;
                }
                employees.push(employee);
                console.log(employees);
        };

        function showDepartmentClick(){
            refreshDepartments();
        };

        function addDepartmentClick(){
            let textTitle = document.getElementById("departmentInput")
            
            saveDepartment(textTitle.value)
            textTitle.value = " "
            refreshDepartments();
        };

        function refreshDepartments(){
            fillListDepartments("departments-list");
        }

        function saveDepartment(titleValue){
            let department = {
                title: titleValue
            };
            departments.push(department);
            console.log(departments);
        };

        function fillListDepartments(listId) {

            let listElement = document.getElementById(listId)
            listElement.innerHTML = " ";

            for (let i = 0; i < departments.length; i++) {
                let department = departments[i]
                let li = '<li>' + department.title  + '</li>'
                listElement.innerHTML += li;
            }
        };
       

        function clearDepartmentClick(){
            let listElement = document.getElementById("departments-list")
            listElement.innerHTML = "";
        };
    
        
    </script>
    
 </body>

</html>