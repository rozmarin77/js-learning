<!DOCTYPE html>
<html>
<head>
    <title>Company</title>
   <!-- <link rel="stylesheet" href="departmentStyle.css">-->

 </head>
 <body>
     <p><b>list of departments</b>
         <input type="button" id="showDepartment" value="Show departments">
         <input type="button" id="clearDepartment" value="Clear departments">
         <ol id="departments-list"></ol>
         <p>Enter department<br>
         <input type="text" id="departmentInput">
         <input type="button" id="addDepartment" value="Add department"><br></br>

         <p><b>list of employees</b>
         <input type="button" id="shoEmployee" value="Show employees">
         <input type="button" id="clearEmployee" value="Clear employees">

         <!--<div class="employees-list"-->   
         <table id="employees-list" style="border-style: solid">
            <thead>
                <th>name</th>
                <th>position</th>
            </thead>

            <tbody>
                <tr data-employee-id="1">
                    <td>Ron</td>
                    <td>
                        <select onchange="positionChanged(event)">
                            <option value="worker">Worker</option>
                            <option value="manager">Manager</option>                            
                        </select>
                    </td>
                </tr>
                <tr data-employee-id="2">
                    <td>Petya</td>
                    <td>
                        <select onchange="positionChanged(event)">
                            <option value="worker">Worker</option>
                            <option value="manager">Manager</option>                            
                        </select>
                    </td>
                </tr>
            </tbody>
        </table>

         <p>Enter employee<br>
         <input type="text" id="employeeInput">
         <input type="button" id="addEmployee" value="Add employee"><br></br>

    <script>

        window.onload = init;
        
        let positions = {
            manager: 'manager',
            worker: 'worker'
        };

        function Employee(id, name, position) {
            this.id = id;
            this.name = name;
            this.position = position;

        }

        let lastEmployeeId = 2;
        let employees = [
            new Employee(1, 'Rone', positions.worker),
            new Employee(2, 'Vasya', positions.manager),
        ];

        function Department(title){
            this.title = title;
        };

        let departments = [
            new Department('Marketing'),
            new Department('Technical'),
            new Department('Advertising')
        ]
        console.log(departments);
        
        function init(){
            let button = document.getElementById("showDepartment")
            button.onclick = showDepartmentClick;

            let buttonAdd = document.getElementById("addDepartment")
            buttonAdd.onclick = addDepartmentClick;

            let buttonClear = document.getElementById("clearDepartment")
            buttonClear.onclick = clearDepartmentClick;
        };

        function positionChanged(e) {
            let select = e.target;
            console.log(select.value);
           // select.value = emp.position //посмотреть как работать будет
            console.log(select.closest('tr').dataset.employeeId);
        }

        function showDepartmentClick(){
            refreshDepartments();
        };

        function addDepartmentClick(){
            let textTitle = document.getElementById("departmentInput")
            
            saveDepartment(textTitle.value)
            textTitle.value = " "
            refreshDepartments();
        };

        function refreshDepartments(){
            fillListDepartments("departments-list");
        }

        function saveDepartment(titleValue){
            let department = {
                title: titleValue
            };
            departments.push(department);
            console.log(departments);
        };

        function fillListDepartments(listId) {

            let listElement = document.getElementById(listId)
            listElement.innerHTML = " ";

            for (let i = 0; i < departments.length; i++) {
                let department = departments[i]
                let li = '<li>' + department.title  + '</li>'
                listElement.innerHTML += li;
            }
        };

        function clearDepartmentClick(){
            let listElement = document.getElementById("departments-list")
            listElement.innerHTML = "";
        };
    </script>
    
 </body>

</html>